XCOMM Top level Imake file for ACCESS system
#define IHaveSubdirs

#define PassDebugFlags	"DEBUG=$(DEBUG)" \
	                "CDEBUGFLAGS=$(CDEBUGFLAGS)" \
	                "CXXDEBUGFLAGS=$(CXXDEBUGFLAGS)" \
			"F90DEBUGFLAGS=$(F90DEBUGFLAGS)" \
			"F77DEBUGFLAGS=$(F77DEBUGFLAGS)"

SUBDIRS = \
$(SERIALMPISRC) \
$(HDF5SRC) \
$(NETCDFSRC) \
$(ZOLTANSRC) \
parallel \
matio

MakeAllTargets($(SUBDIRS),PassDebugFlags)

TPLs::
	for i in $(SUBDIRS) ;\
	do \
		make $$i; \
	done

MakeAllTargets($(SUBDIRS),PassDebugFlags)

XCOMM Install include files 
makeincludes::
	@if test -d $(LIBRARIESSRC) ; \
	then \
	(cd $(LIBRARIESSRC) && make makeincludes) ; \
	fi;
	@if test -d $(NETCDFSRC) ; \
	then \
	(cd $(NETCDFSRC) && make makeincludes) ; \
	fi;
	@if test -d $(HDF5SRC) ; \
	then \
	(cd $(HDF5SRC) && make makeincludes) ; \
	fi;

MakeTarget(netcdf,      $(NETCDFSRC),    PassDebugFlags)
MakeTarget(hdf5,        $(HDF5SRC),      PassDebugFlags)
MakeTarget(serial_mpi,  $(SERIALMPISRC), PassDebugFlags)
MakeTarget(zoltan,      $(ZOLTANSRC),    PassDebugFlags)
MakeTarget(parallel,    parallel,        PassDebugFlags)
MakeTarget(matio,       matio,           PassDebugFlags)
